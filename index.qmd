---
title: "הדרכה לחישוב זמני הליכה לתחנות אוטובוס באמצעות qgis - הדרכה לחברת חסון ירושלמי"
author: 'ד"ר עדו קליין'
date: 03/06/2024
format:
  revealjs:
    rtl: true
    css: "style.css"
    slide-number: true
    show-slide-number: all
editor: visual
---

## מי אני?

עדו קליין, מתכנן ומודליסט תחבורה, יועץ לחברת אשד וללקוחות נוספים, ד"ר לגאוגרפיה, חיית טוויטר

```{=html}
<a class="twitter-timeline" href="https://twitter.com/idoklein1?ref_src=twsrc%5Etfw">Tweets by idoklein1</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
```
## מטרות ההדרכה

-   להבין מהי רשת מרחבית
-   לדעת איך לטעון קבצים לqgis
-   לדעת איך להכין רשתות להרצה
-   לדעת איך להריץ את אלגוריתם v.net.iso הקוטע רשת למקטעי מרחק
-   לדעת איך לייצר שכבה נקודתית מאפס,המייצגת כמות יחידות דיור לבניין
-   לדעת איך לייצר חיבור מרחבי בין שכבות
-   לדעת איך לעשות פיבוט בqgis

## מבוא - למה חשוב למדל זמני הליכה לתחנות אוטובוס?

חשוב כמו כל דבר אחר, בעולם הפעילויות הסמוך לבית. תחנות אוטובוס פשוט מסוגלות להרחיב משמעותית את הנגישות ובכך את האפשרויות של הפרט. אנו יכולים לחשב את הנגישות על ידי מציאת המסלול הקצר ביותר על גבי רשת רחובות מנקודה א אל נקודה ב. מכיוון שאנו עובדים עם מחשב ניתן לבצע את החישוב הזה פעמים רבות על מנת לקבל מפה כוללנית של נגישות.

## חישוב מסלול קצר ביותר - שלל אלגורתמים

דייקסטרה\
A\*\
לא נדון בצד התאורטי של פעולת האלגוריתם, אבל כן נדבר על מה חשוב יותר ופחות מבחינת המידול

## רשת מרחבית

הכלאה של שני יצורים:

-   שכבת קווים ממגית - מורכבת מקווים בלבד
-   רשת מתורת הגרפים - מורכבת מקודקודים וקשתות

## שכבת קווים ממגית

![](images/paste-3.png){width="243"}

## רשת מתורת הגרפים

![מאת User:AzaToth - Image:6n-graf.png simlar input data, נחלת הכלל, https://commons.wikimedia.org/w/index.php?curid=820489](images/paste-4.png){width="666"}

## הורדת החומרים

```{r}
library(downloadthis)
downloadthis::download_file("data.zip" ,button_label = "להורדה")
```

## טעינת שכבות לתוכנה

הורדת החומרים וגרירתם פנימה - הדרך הפשוטה ביותר. קבצי shp, שלרוב עובדים אותם, צריכים להכיל לפחות 2 קבצים נלווים (dbf,shx) על מנת להיות תקינים. על כל הקבצים להכיל את אותו השם.

## הכנת רשתות להרצה - מה חשוב?

מבחינת ממ"ג:

שכלל השכבות יהיו באותו היטל

מבחינת רשת:

שהרשת תהיה מחוברת. זה תלוי בממ"ג

## מהו חיבור?

נגיעה של ראש/זנב של קו אחד בזנב/ראש של קו אחר. למשל, כאן יש בעייה: ![](images/paste-5.png)

## תהליך העבודה - שלב 1

-   נראה איך נראית רשת מלוכלכת
-   נלמד איך להתמודד איתה

## רשת מלוכלכת - הדגמה בתוכנה

תוסף מובנה topology checker dangles

![](images/paste-16.png)

-----------

![](images/paste-17.png)

---------------------

![](images/paste-18.png)

ללחוץ על פלוס וOK, ללחוץ על V בפאנל הקודם ו - וטעויות

---------------

![](images/paste-19.png)

-------------------

מסומנות על גבי המפה באדום. מסמנות אי חיבור של השכבה

![](images/paste-20.png)

## הדגמה בתוכנה - איך זה נראה מקרוב

![](images/paste-21.png)

## איך נמנע מהמצב הזה?

אלגוריתם v.clean

מנקה את הבעיות הטופולוגיות מהרשת

נעבוד עם שני כלים שלו - break וsnap

break - שובר את הרשת בהצטלבויות קווים

snap - מצמיד את נקודות הקצה למקום מסוים

## תהליך עבודה

![](images/paste-22.png)

----------------

![](images/paste-23.png)

----------------

הזנת פרמטרים:

![](images/paste-24.png){width="498"}

----------------

מה חשוב? להזין את השכבה עליה עבדנו

![](images/paste-28.png)

לבחור את הכלים בהם נרצה להשתמש

![](images/paste-25.png)

------------------

פרמטרים בכל אחד מהטיעונים:

![](images/paste-26.png)

![](images/paste-27.png)

-----------------------------

ללחוץ על run

נבדוק שוב עם הtopology checker - עדיין יש בעיות. למה?

-------

נריץ שוב v.clean, רק break

רשת מחוברת

## 

## תבחין הניקוי

-   הגיון בריא

-   topology checker

-   הסתכלות מרחבית כוללת

## 

## תהליך העבודה - שלב 2

-   הרצה של אלגוריתם לחישוב מרחקים

-   סימון יחידות הדיור באמצעות שכבה נקודתית

-   צירוף מרחבי

-   פיבוט טייבל בqgis בהתקנת תוסף

## הרצת v.net.iso

אלגוריתם זה יאפשר לנו לחשב את כלל המרחקים בקטגוריות שרצינו

![](images/paste-29.png)

-----------------------

![](images/paste-30.png){width="625"}

באדום - הזנת הרשת

בכתום - הזנת תחנות האוטובוס

בכחול - קטגוריות של מרחקים

## סימבולוגיה של התוצאה - הדגמה בתוכנה

## יצירת שכבה נקודתית לסימון יחידות הדיור

![-----------------------------](images/paste-31.png)

![------------------------](images/paste-34.png)

![](images/paste-36.png)

-----------------------

![](images/paste-37.png)

קידוד והזנת מספר יח"ד

-------------------------

## צירוף מרחבי

![](images/paste-38.png)

-----------------------------

## התקנת תוסף group stats

![](images/paste-39.png)

---------------------------

![](images/paste-40.png)

----------------------------

![](images/paste-41.png)

----------------------------

לאחר התקנה תופיע בתפריט הוקטור:

![](images/paste-42.png)

----------------------------------

יש לבחור שכבה תחת layers (את השכבה האחרונה שיצרנו)

![](images/paste-43.png)

------------------------------------

גרירת הנ"ל כך:

![](images/paste-44.png)

חישוב

-----------------------------------------

תוצאה

![](images/paste-45.png)

אפשרות לייצא נתונים בטאב data